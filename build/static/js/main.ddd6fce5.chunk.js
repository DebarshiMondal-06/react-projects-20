(this["webpackJsonpfullsite-react"]=this["webpackJsonpfullsite-react"]||[]).push([[0],{39:function(e,t){},509:function(e,t,a){},510:function(e,t,a){},512:function(e,t,a){},542:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),o=a.n(r),l=a(14),s=a(4),i=a(8),m=a.n(i),u=a(17),f=a(13),b=a(27),d=a.n(b),p=a(15),g=Object(n.createContext)();d.a.config.region="ap-south-1";var E=function(e){var t=e.children,a=Object(n.useState)(!1),r=Object(f.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(0),i=Object(f.a)(s,2),b=i[0],E=i[1],h=new d.a.CognitoIdentityCredentials({IdentityPoolId:"ap-south-1:4979d70f-ee73-4f5d-b057-5af093b65404"}),v=new d.a.DynamoDB.DocumentClient({credentials:h}),N=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.get({TableName:"Book_Likes",Key:{book_id:1*t}}).promise().then((function(e){e.Item&&e.Item.likes>0?E(e.Item&&e.Item.likes):E(0)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(m.a.mark((function e(t,a,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t&&a||n)&&(c=new d.a.CognitoIdentityCredentials({IdentityPoolId:"ap-south-1:4979d70f-ee73-4f5d-b057-5af093b65404",Logins:{"api.twitter.com":n?"".concat(n.oauth_token,";").concat(n.oauth_token_secret):null,"accounts.google.com":t&&a?t.tokenObj.id_token:null}})).get(Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={accessKey:c.accessKeyId,secretAccessKey:c.secretAccessKey,sessionToken:c.sessionToken},localStorage.setItem("tokens",JSON.stringify(t)),localStorage.setItem("user",a?a.email:n.screen_name),h.clearCachedId(),window.location.href="/";case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){t?e():(p.b.error("Token Not Found"),p.b.clearWaitingQueue())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(g.Provider,{value:{DynamoDB:v,setLoader:l,loader:o,likes:b,fetch_one:N,setLikes:E,allowAccess:k,checkTokens:O,removeCookies:function(){localStorage.removeItem("tokens"),localStorage.removeItem("user"),window.location.reload()}}},t)},h=function(){var e=Object(s.g)(),t=Object(n.useContext)(g).removeCookies,a=localStorage.getItem("tokens");return c.a.createElement("div",{className:"navbar-section"},c.a.createElement("nav",{className:"navbar shadow navbar-expand-lg"},c.a.createElement("div",{className:"container-fluid"},c.a.createElement(l.b,{to:"/",className:"navbar-brand"},"Cognito Identity"),c.a.createElement("section",{className:"buttons"},a?c.a.createElement("button",{onClick:function(){return t()},className:"btn",style:{width:150}},"Logout \xa0",c.a.createElement("i",{className:"fas fa-sign-out-alt"})):c.a.createElement(l.b,{to:"/login"},c.a.createElement("button",{className:"btn"},"Login ",c.a.createElement("i",{className:"fas fa-sign-in-alt"}))),"/create"!==e.pathname?c.a.createElement(l.b,{to:"/create"},c.a.createElement("button",{className:"btn"},"Add ",c.a.createElement("i",{className:"fas fa-plus-square"}))):null))))},v=a(12),N=a(73),k=function(){var e=Object(u.a)(m.a.mark((function e(t,a,n){var c,r,o,l,s,i,u,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),c=localStorage.getItem("tokens"),r=JSON.parse(c)||{},o=r.accessKey,l=r.sessionToken,s=r.secretAccessKey,i=new N.AwsClient({service:"execute-api",region:"ap-south-1",accessKeyId:o,secretAccessKey:s,sessionToken:l}),u="https://ot39qtb9rj.execute-api.ap-south-1.amazonaws.com/dev/".concat(a),e.next=7,i.sign(u,{method:n||"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 7:return f=e.sent,e.next=10,fetch(f);case 10:return e.next=12,e.sent.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(n.useState)({title:"",description:"",author:"",img:""}),t=Object(f.a)(e,2),a=t[0],r=t[1],o=(Object(s.f)(),Object(n.useContext)(g).checkTokens),l=localStorage.getItem("tokens");return c.a.createElement("section",{className:"container contact_main"},c.a.createElement("form",{className:"card shadow contact_card"},c.a.createElement("h2",null,"Add Book"),c.a.createElement("article",{className:"row"},c.a.createElement("div",{className:"col-md-6 mb-3"},c.a.createElement("label",{className:"form-label"},"Title"),c.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return r(Object(v.a)(Object(v.a)({},a),{},{title:e.target.value}))}})),c.a.createElement("div",{className:"col-md-6 mb-3"},c.a.createElement("label",{className:"form-label"},"Author"),c.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return r(Object(v.a)(Object(v.a)({},a),{},{author:e.target.value}))}}))),c.a.createElement("div",{className:"mb-3"},c.a.createElement("label",{className:"form-label"},"Description"),c.a.createElement("textarea",{type:"text",className:"form-control",onChange:function(e){return r(Object(v.a)(Object(v.a)({},a),{},{description:e.target.value}))}})),c.a.createElement("div",{className:"mb-3"},c.a.createElement("label",{className:"form-label"},"Image URL"),c.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return r(Object(v.a)(Object(v.a)({},a),{},{img:e.target.value}))}})),c.a.createElement("button",{type:"button",className:"btn contact_btn",onClick:function(){o(l).then((function(){k(Object(v.a)(Object(v.a)({},a),{},{book_id:901089}),"addbook","POST").then((function(){setTimeout((function(){}),1500)}))}))}},"Create")))},j=(a(509),function(e){var t=e.rawData;return c.a.createElement("section",{className:"card_section"},t.map((function(e,t){var a=e.img,n=e.title,r=e.book_id;return c.a.createElement(l.b,{to:"/view/".concat(r),key:t},c.a.createElement("div",{className:"card",style:{width:"21rem",border:"none",cursor:"pointer"}},c.a.createElement("img",{src:a,className:"card_image p-3 card-img-top",alt:"SOME",width:"300",height:"200"}),c.a.createElement("div",{className:"card-body",style:{marginTop:-15}},c.a.createElement("h4",{className:"h5 card_title p-0"},n))))})))}),w=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),l=Object(f.a)(o,2),s=l[0],i=l[1],m=Object(n.useContext)(g),u=m.DynamoDB,b=m.setLoader,d=m.loader;Object(n.useEffect)((function(){b(!0),u.scan({TableName:"BookTable"}).promise().then((function(e){b(!1),r(e.Items)})).catch((function(e){return e}))}),[]);var p;return p=a.filter((function(e){return e.title.toLowerCase().includes(s.toLowerCase())})),d?c.a.createElement("section",null,c.a.createElement("h2",{className:"text-center"},"Loading...")):c.a.createElement("section",{className:"container mt-5"},c.a.createElement("div",{className:"search mb-5"},c.a.createElement("h3",null,"Search"),c.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return i(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("h3",null,"Avialable Books:"),c.a.createElement("main",null,c.a.createElement("h5",{className:"text-center mt-4"},!p.length>0?"No Data":null),c.a.createElement(j,{rawData:p}))))},y=(a(510),function(e){var t=e.id,a=localStorage.getItem("tokens"),r=Object(n.useContext)(g),o=r.fetch_one,l=r.likes,s=r.checkTokens;Object(n.useEffect)((function(){o(t)}),[t]);return c.a.createElement(c.a.Fragment,null," ",c.a.createElement("button",{className:"btn",onClick:function(){s(a).then((function(){k({count:l+1,book_id:t},"","PUT").then((function(){o(t)})).catch((function(e){console.log(e)}))}))}},c.a.createElement("i",{className:"fas fa-thumbs-up"}))," \xa0 \xa0 ",c.a.createElement("span",null," ",l))}),x=function(){var e=Object(s.h)().id,t=Object(n.useState)({}),a=Object(f.a)(t,2),r=a[0],o=a[1],l=Object(n.useContext)(g),i=l.DynamoDB,m=l.setLoader,u=l.loader;return Object(n.useEffect)((function(){m(!0),i.get({TableName:"BookTable",Key:{book_id:1*e}}).promise().then((function(e){m(!1),o(e.Item)})).catch(console.error)}),[e]),u?c.a.createElement("section",null,c.a.createElement("h2",{className:"text-center"},"Loading...")):c.a.createElement("section",{className:"container view_section"},c.a.createElement("main",{className:"row"},c.a.createElement("div",{className:"card col-md-5 p-2"},c.a.createElement("img",{className:"card-img-top",src:r.img,alt:"view",height:"400"})),c.a.createElement("div",{className:"view_content col-md-5"},c.a.createElement("h2",null,r.title),c.a.createElement("p",null,r.description),c.a.createElement("article",{className:"view_likes"},c.a.createElement(y,{id:e})))))},C=(a(511),a(74)),I=a.n(C),S=(a(512),a(75)),T=a.n(S),_=function(){var e=Object(n.useContext)(g).allowAccess;return c.a.createElement("section",{className:"login--section"},c.a.createElement("div",{className:"login--container"},c.a.createElement("div",{className:"login--card card shadow"},c.a.createElement("article",{style:{textAlign:"center",margin:"40px 0px"}},c.a.createElement("p",{className:"login--text"},"Please login with any of Social Account."),c.a.createElement(I.a,{clientId:"1072297356666-t00vvhrqcd8251g73or0t14n0gqjefd7.apps.googleusercontent.com",render:function(e){return c.a.createElement("button",{onClick:e.onClick,className:"btn btn-info login--btn"},"Login With Google")},onSuccess:function(t){t?e(t,t.profileObj,null):p.b.error("User Not Found!")},onFailure:function(e){console.log(e),p.b.error("Login Failed, Try Again!")}}),c.a.createElement("br",null),c.a.createElement(T.a,{className:"mt-4",authCallback:function(t,a){if(console.log(t),t)return p.b.error("Login Failed, Try Again!");e(null,null,a)},consumerKey:"0WXACwqKyvzmps02EhBTQe0ip",consumerSecret:"ddiuTqeAzUfGgNaOmzFbs5NSvgs2CL69Gg8Huc07SJG256gj3w"})))))},A=function(){return c.a.createElement(l.a,null,c.a.createElement(E,null,c.a.createElement(p.a,{autoClose:"1500",limit:1}),c.a.createElement(h,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:w}),c.a.createElement(s.a,{exact:!0,path:"/login",component:_}),c.a.createElement(s.a,{path:"/create",component:O}),c.a.createElement(s.a,{path:"/view/:id",component:x}))))};o.a.render(c.a.createElement(A,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a(542)}},[[76,1,2]]]);
//# sourceMappingURL=main.ddd6fce5.chunk.js.map